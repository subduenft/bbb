{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\nvar _possibleConstructorReturn = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\nvar _get = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get\");\nvar _getPrototypeOf = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\nvar _inherits = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MethodDataType = void 0;\nvar ethUtil = require(\"ethereumjs-util\");\nvar _ = require(\"lodash\");\nvar set_1 = require(\"../abstract_data_types/types/set\");\nvar constants_1 = require(\"../utils/constants\");\nvar tuple_1 = require(\"./tuple\");\nvar MethodDataType = /*#__PURE__*/function (_set_1$AbstractSetDat) {\n  _inherits(MethodDataType, _set_1$AbstractSetDat);\n  function MethodDataType(abi, dataTypeFactory) {\n    var _this;\n    _classCallCheck(this, MethodDataType);\n    var methodDataItem = {\n      type: 'method',\n      name: abi.name,\n      components: abi.inputs\n    };\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MethodDataType).call(this, methodDataItem, dataTypeFactory));\n    _this._methodSignature = _this._computeSignature();\n    _this._methodSelector = _this._computeSelector();\n    var returnDataItem = {\n      type: 'tuple',\n      name: abi.name,\n      components: abi.outputs\n    };\n    _this._returnDataType = new tuple_1.TupleDataType(returnDataItem, _this.getFactory());\n    return _this;\n  }\n  _createClass(MethodDataType, [{\n    key: \"encode\",\n    value: function encode(value, rules) {\n      var calldata = _get(_getPrototypeOf(MethodDataType.prototype), \"encode\", this).call(this, value, rules, this._methodSelector);\n      return calldata;\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(calldata, rules) {\n      var value = _get(_getPrototypeOf(MethodDataType.prototype), \"decode\", this).call(this, calldata, rules, this._methodSelector);\n      return value;\n    }\n  }, {\n    key: \"strictDecode\",\n    value: function strictDecode(calldata, rules) {\n      var value = _get(_getPrototypeOf(MethodDataType.prototype), \"decode\", this).call(this, calldata, Object.assign(Object.assign({}, rules), {\n        isStrictMode: true\n      }), this._methodSelector);\n      var valueAsArray = _.isObject(value) ? _.values(value) : [value];\n      switch (valueAsArray.length) {\n        case 0:\n          return undefined;\n        case 1:\n          return valueAsArray[0];\n        default:\n          return valueAsArray;\n      }\n    }\n  }, {\n    key: \"encodeReturnValues\",\n    value: function encodeReturnValues(value, rules) {\n      var returnData = this._returnDataType.encode(value, rules);\n      return returnData;\n    }\n  }, {\n    key: \"decodeReturnValues\",\n    value: function decodeReturnValues(returndata, rules) {\n      var returnValues = this._returnDataType.decode(returndata, rules);\n      return returnValues;\n    }\n  }, {\n    key: \"strictDecodeReturnValue\",\n    value: function strictDecodeReturnValue(returndata, rules) {\n      var returnValues = this._returnDataType.decode(returndata, Object.assign(Object.assign({}, rules), {\n        isStrictMode: true\n      }));\n      var returnValuesAsArray = _.isObject(returnValues) ? _.values(returnValues) : [returnValues];\n      switch (returnValuesAsArray.length) {\n        case 0:\n          return undefined;\n        case 1:\n          return returnValuesAsArray[0];\n        default:\n          return returnValuesAsArray;\n      }\n    }\n  }, {\n    key: \"getSignatureType\",\n    value: function getSignatureType() {\n      return this._methodSignature;\n    }\n  }, {\n    key: \"getSelector\",\n    value: function getSelector() {\n      return this._methodSelector;\n    }\n  }, {\n    key: \"getReturnValueDataItem\",\n    value: function getReturnValueDataItem() {\n      var returnValueDataItem = this._returnDataType.getDataItem();\n      return returnValueDataItem;\n    }\n  }, {\n    key: \"_computeSignature\",\n    value: function _computeSignature() {\n      var memberSignature = this._computeSignatureOfMembers();\n      var methodSignature = \"\".concat(this.getDataItem().name).concat(memberSignature);\n      return methodSignature;\n    }\n  }, {\n    key: \"_computeSelector\",\n    value: function _computeSelector() {\n      var signature = this._computeSignature();\n      var selector = ethUtil.bufferToHex(ethUtil.toBuffer(ethUtil.keccak256(Buffer.from(signature)).slice(constants_1.constants.HEX_SELECTOR_BYTE_OFFSET_IN_CALLDATA, constants_1.constants.HEX_SELECTOR_LENGTH_IN_BYTES)));\n      return selector;\n    }\n  }]);\n  return MethodDataType;\n}(set_1.AbstractSetDataType);\nexports.MethodDataType = MethodDataType;","map":null,"metadata":{},"sourceType":"script"}