{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\nvar _possibleConstructorReturn = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\nvar _getPrototypeOf = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\nvar _inherits = require(\"/Users/nicholasschepisi/Desktop/code/bbb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PointerCalldataBlock = void 0;\nvar ethUtil = require(\"ethereumjs-util\");\nvar constants_1 = require(\"../../utils/constants\");\nvar calldata_block_1 = require(\"../calldata_block\");\nvar PointerCalldataBlock = /*#__PURE__*/function (_calldata_block_1$Cal) {\n  _inherits(PointerCalldataBlock, _calldata_block_1$Cal);\n  function PointerCalldataBlock(name, signature, parentName, dependency, parent) {\n    var _this;\n    _classCallCheck(this, PointerCalldataBlock);\n    var headerSizeInBytes = PointerCalldataBlock._EMPTY_HEADER_SIZE;\n    var bodySizeInBytes = PointerCalldataBlock._DEPENDENT_PAYLOAD_SIZE_IN_BYTES;\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PointerCalldataBlock).call(this, name, signature, parentName, headerSizeInBytes, bodySizeInBytes));\n    _this._parent = parent;\n    _this._dependency = dependency;\n    _this._aliasFor = undefined;\n    return _this;\n  }\n  _createClass(PointerCalldataBlock, [{\n    key: \"toBuffer\",\n    value: function toBuffer() {\n      var destinationOffset = this._aliasFor !== undefined ? this._aliasFor.getOffsetInBytes() : this._dependency.getOffsetInBytes();\n      var parentOffset = this._parent.getOffsetInBytes();\n      var parentHeaderSize = this._parent.getHeaderSizeInBytes();\n      var pointer = destinationOffset - (parentOffset + parentHeaderSize);\n      var pointerHex = \"0x\".concat(pointer.toString(constants_1.constants.HEX_BASE));\n      var pointerBuf = ethUtil.toBuffer(pointerHex);\n      var pointerBufPadded = ethUtil.setLengthLeft(pointerBuf, constants_1.constants.EVM_WORD_WIDTH_IN_BYTES);\n      return pointerBufPadded;\n    }\n  }, {\n    key: \"getDependency\",\n    value: function getDependency() {\n      return this._dependency;\n    }\n  }, {\n    key: \"setAlias\",\n    value: function setAlias(block) {\n      this._aliasFor = block;\n      this._setName(\"\".concat(this.getName(), \" (alias for \").concat(block.getName(), \")\"));\n    }\n  }, {\n    key: \"getAlias\",\n    value: function getAlias() {\n      return this._aliasFor;\n    }\n  }, {\n    key: \"getRawData\",\n    value: function getRawData() {\n      var dependencyRawData = this._dependency.getRawData();\n      var rawDataComponents = [];\n      rawDataComponents.push(PointerCalldataBlock.RAW_DATA_START);\n      rawDataComponents.push(dependencyRawData);\n      rawDataComponents.push(PointerCalldataBlock.RAW_DATA_END);\n      var rawData = Buffer.concat(rawDataComponents);\n      return rawData;\n    }\n  }]);\n  return PointerCalldataBlock;\n}(calldata_block_1.CalldataBlock);\nexports.PointerCalldataBlock = PointerCalldataBlock;\nPointerCalldataBlock.RAW_DATA_START = Buffer.from('<');\nPointerCalldataBlock.RAW_DATA_END = Buffer.from('>');\nPointerCalldataBlock._DEPENDENT_PAYLOAD_SIZE_IN_BYTES = 32;\nPointerCalldataBlock._EMPTY_HEADER_SIZE = 0;","map":null,"metadata":{},"sourceType":"script"}